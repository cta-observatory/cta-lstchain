DataWriter:
  Contact:
    name: YOUR-NAME-HERE
    email: YOUREMAIL@EXAMPLE.ORG
    organization: YOUR-ORGANIZATION

  overwrite: false # do not overwrite existing files
  write_images: false # store DL1 images
  write_parameters: false # store DL1 parameters
  write_showers: false # store DL2 stereo geometry
  write_raw_waveforms: false # write R0 waveforms
  write_waveforms: false # write R1 waveforms
  write_muon_parameters: false # analyze and write muon parameters

EventSource:
  LSTEventSource:
    default_trigger_type: "ucts"
    allowed_tels: [1]
    min_flatfield_adc: 3000
    min_flatfield_pixel_fraction: 0.8
    calibrate_flatfields_and_pedestals: false

    EventTimeCalculator:
      dragon_reference_counter: null
      dragon_reference_time: null

    PointingSource:
      drive_report_path: null

    LSTR0Corrections:
      calib_scale_high_gain: 1.088
      calib_scale_low_gain: 1.004
      drs4_pedestal_path: null
      calibration_path: null
      drs4_time_calibration_path: null

LSTInterleavedProcessor:
  write_interleaved: False
  output_path: null
  DataWriter:
    overwrite: true
    write_images: false
    write_parameters: false
    write_waveforms: true
    transform_waveform: true
    waveform_dtype: "uint16"
    waveform_offset: 400
    waveform_scale: 80

  LSTCalibrationCalculator:
    systematic_correction_path: null
    npe_median_cut_outliers: [-5, 5]
    squared_excess_noise_factor: 1.222
    flatfield_product: "FlasherFlatFieldCalculator"
    pedestal_product: "PedestalIntegrator"

    PedestalIntegrator:
      sample_size: 10000
      sample_duration: 100000
      tel_id: 1
      time_sampling_correction_path: null
      charge_median_cut_outliers: [-10, 10]
      charge_std_cut_outliers: [-10, 10]
      charge_product: "FixedWindowSum"
      FixedWindowSum:
        window_shift: 6
        window_width: 12
        peak_index: 18
        apply_integration_correction: false

    FlasherFlatFieldCalculator:
      sample_size: 10000
      sample_duration: 100000
      tel_id: 1
      time_sampling_correction_path: null
      charge_product: "LocalPeakWindowSum"
      charge_median_cut_outliers: [-0.9, 2]
      charge_std_cut_outliers: [-10, 10]
      time_cut_outliers: [2, 38]
      LocalPeakWindowSum:
        window_shift: 5
        window_width: 12
        apply_integration_correction: false

WaveformNSBTuner:
  apply_waveform_tuning: False
  nsb_tuning_ratio: 0.52
  spe_location: "lstchain/data/SinglePhE_ResponseInPhE_expo2Gaus.dat"
  target_data: null

LSTCameraCalibrator:
  data_volume_reducer_type: "NullDataVolumeReducer"
  apply_Cat_B_calibrations: False
  cat_b_calibrations_path: null
  image_extractor_type:
    - ["type", "*", "LocalPeakWindowSum"]
  LocalPeakWindowSum:
    window_shift: 4
    window_width: 8
    apply_integration_correction: false
  apply_waveform_time_shift: false
  apply_peak_time_shift: true

LSTImageProcessor:
  apply_image_modifier: false
  ImageModifier:
    psf_smear_factor: 0.0
    noise_transition_charge: 8
    noise_bias_dim_pixels: 0.655
    noise_level_dim_pixels: 0.0
    noise_level_bright_pixels: 0.0
    noise_correct_bias: 0.0
    rng_seed: 1337

  LSTImageCleaner:
    picture_threshold_pe: 8
    boundary_threshold_pe: 4
    min_picture_neighbors: 2
    keep_isolated_pixels: false
    delta_time: 2
    use_dynamic_cleanine: true
    fraction_dynamic: 0.03
    threshold_dynamic: 267
    use_only_largest_island: false
    use_pedestal_cleaning: false
    sigma: 2.5

  ImageQualityQuery:
    quality_criteria:
      - ["enough_pixels", "np.count_nonzero(image) > 2"]
      - ["enough_charge", "image.sum() > 50"]

LSTMuonProcessor:
  write_muon_events: false
  output_path: null
  completeness_threshold: 30.0
  ratio_width: 1.5
  pedestal: 1.1
  DataWriter:
    overwrite: false
    write_images: false
    write_parameters: true
    write_showers: false
    write_raw_waveforms: false
    write_waveforms: false
    write_muon_parameters: false

  CameraCalibrator:
    image_extractor_type:
      - ["type", "*", "GlobalPeakWindowSum"]
    GlobalPeakWindowSum:
      window_shift: 4
      window_width: 8
      apply_integration_correction: false

  ImageParameterQuery:
    quality_criteria:
      - ["min_pixels", "dl1_params.morphology.n_pixels > 100"]
      - ["min_intensity", "dl1_params.hillas.intensity > 500"]

  RingQuery:
    quality_criteria:
      - ["radius_not_nan", "np.isfinite(ring.radius.value)"]
      - ["min_pixels", "np.count_nonzero(mask) > 50"]
      - ["ring_containment", "parameters.containment > 0.5"]

LHFitProcessor:
  compute_lhfit_parameters: false
  sigma_s:
    - ["type", "LST_LST_LSTCam", 0.3282]
  crosstalk:
    - ["type", "LST_LST_LSTCam", 0.0]
  sigma_space: 3
  sigma_time: 4
  time_before_shower:
    - ["type", "LST_LST_LSTCam", 0.0]
  time_after_shower:
    - ["type", "LST_LST_LSTCam", 20.0]
  n_peaks: 0
  no_asymmetry: false
  use_weight: false
  verbose: 0

ShowerProcessor:
  reconstructor_types:
    - HillasReconstructor

  HillasReconstructor:
    StereoQualityQuery:
      quality_criteria:
        - [enough intensity, "parameters.hillas.intensity > 50"]
        - [Positive width, "parameters.hillas.width.value > 0"]
        - [enough pixels, "parameters.morphology.n_pixels > 3"]
        - [not clipped, "parameters.leakage.intensity_width_2 < 0.5"]
